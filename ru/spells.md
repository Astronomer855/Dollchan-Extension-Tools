---
layout: default
language: ru
translations:
  en: /en/spells
title: Руководство по спеллам (новый формат)
---

## Волшебные команды (спеллы)

Скрипт обладает широкими возможностями по пользовательскому управлению загруженным на странице контентом, включая скрытие постов по различным условиям и замену содержимого посредством регулярных выражений.
В связи с тем, что скрипт находится в состоянии перманентной разработки, набор управляющих слов может изменяться и дополняться.

Все команды, в силу устоявшихся традиций, будем называть спеллами, от англ. spell &mdash; "заклинание".

## Спеллы скрытия постов

Каждый спелл скрытия может возвратить одно из двух состояний &mdash; `true` или `false`. Если он при проверке всех условий возвращает `true` для одного из постов, то этот пост будет скрыт. В случае, если этим постом окажется оп-пост, будет скрыт весь тред.

Полный синтаксис спеллов скрытия:

`#спелл[доска,тред](аргумент)`

где `спелл` &mdash; имя спелла, `доска` и `тред` &mdash; область его действия, `аргумент` &mdash; условие, по которому выполняется спелл.

Все спеллы скрытия могут иметь следующие варианты синтаксиса:

* `#спелл(аргумент)` &mdash; действие во всех досках и тредах.
* `#спелл[доска](аргумент)` &mdash; действие на указанной доске и во всех ее тредах. На других досках всегда возвращает `false`.
* `#спелл[доска,](аргумент)` &mdash; действие только на указанной доске, но не в ее тредах. В тредах этой доски и на других досках всегда возвращает `false`.
* `#спелл[доска,тред](аргумент)` &mdash; действие в определенном треде определенной доски. При этом вне данного треда спелл будет всегда возвращать `false`.

<center><table><tbody>
  <tr>
      <td>
      </td>
      <td>доска /b/</td>
      <td>тред 32767 доски /b/</td>
      <td>доска /c/</td>
      <td>тред 4095 доски /c/</td>
  </tr>
  <tr>
      <td>#спелл(аргумент)</td>
      <td>true/false</td>
      <td>true/false</td>
      <td>true/false</td>
      <td>true/false</td>
  </tr>
  <tr>
      <td>#спелл[b\](аргумент)</td>
      <td>true/false</td>
      <td>true/false</td>
      <td>false</td>
      <td>false</td>
  </tr>
  <tr>
      <td>#спелл[b,\](аргумент)</td>
      <td>true/false</td>
      <td>false</td>
      <td>false</td>
      <td>false</td>
  </tr>
  <tr>
      <td>#спелл[b,32767\](аргумент)</td>
      <td>false</td>
      <td>true/false</td>
      <td>false</td>
      <td>false</td>
  </tr>
</tbody></table></center>

<span id="operators"></span>Если спеллов несколько, то все они должны быть объединены в одно логическое выражение, которое для каждого из постов также будет возвращать `true` или `false`. Для этого доступны следующие логические операции:

* `&` &mdash; логическое "И", `#spell_1 & #spell_2`
* `|`  &mdash; логическое "ИЛИ", `#spell_1 | #spell_2`
* `!` &mdash; логическое "НЕ", `!#spell_1`
* `)` и `(` &mdash; скобки для логической группировки, `(#spell_1 & #spell_2) | #spell_3`

**Важно!** Каждая закрывающая скобка `)` и знак `\` в аргумете спеллов скрытия `#words`, `#name` и `#trip`, а также в строке для замены спеллов `#rep` и `#outrep`, должны быть экранированы таким образом: `\)`, `\\`.

**Важно!** Все спеллы скрытия должны быть связаны между собой логическими операторами. Спеллы замены должны писаться отдельно, без связующих логических операторов. Пример корректной записи:

<pre>
#wipe(samelines,samewords,longwords,numbers) |
#exp(/^(?:bump|up|бамп|вверх)$/i) |
(#all[b,32767] & !#img) |
(#name(Сажа-кун) & #trip(!!SAGEy+453)) |
(#op & #subj(/rozen maiden|pony/i)) |
(#op[s] & #words(соснули)) |
(#op[b] & (
    #words(еот) |
    #words(ума нет - создал тред) |
    #words(official thread)
)) |
#video(/rickroll/i)

#rep(/двач/ig,сосач)
#outrep(/сосач/ig,с*о*сач)
</pre>

**Важно!** Обратите внимание, что спеллы объединены скобками для выполнения логических операций в правильном порядке. Отсутствие скобок приведет к тому, что компилятор неправильно обработает ваши выражения.

***

### #words

`#words[доска,тред](строка)`

Возвращает `true`, если текст сообщения или темы поста содержит выражение, указанное в аргументе строки. Совпадение строки не зависит от регистра и разметки поста. Наличие аргумента обязательно. Примеры:

* `#words(баттхерт)` &mdash; скроет посты на всех досках, содержащие слово "баттхерт" (в том числе "У всех баттхерт.", "ОЛОЛО БАТТХЕРТ!!", "БатТхЕрТ)))" и т.п.
* `#words[b](баттхерт)` &mdash; скроет на доске `/b/` и во всех ее тредах посты, содержащие слово "баттхерт".
* `#words[b,32767](все соснули)` &mdash; скроет в треде `№32767` доски `/b/` посты, содержащие фразу "все соснули". При этом посты будут скрыты только в том случае, если вы находитесь в этом треде.
* `#words[b,](все соснули)` &mdash; аналогично, но посты будут скрываться только при просмотре списка тредов доски `/b/`.
* `#words(баттхерт\)\)\))` &mdash; скроет посты, содержащие "баттхерт)))". Обратите внимание на то, что символы `)` экранированы.
* `#words(шах\\мат)` &mdash; скроет посты, содержащие "шах\мат". Обратите внимание на то, что символ `\` экранирован.

### Примеры логических операций:

Скрыть посты, `[содержащие слово "ололо"] [ИЛИ] [содержащие слово "баттхерт"]`:

* `(#words(ололо) | #words(баттхерт))` &ndash; в данном случае будут скрыты посты "Ололо, все соснули!", "Да у вас баттхерт!" и "Ололо, у вас баттхерт!".

Скрыть посты, `[содержащие слово "ололо"] [И] [содержащие слово "баттхерт"]`:

* `(#words(ололо) & #words(баттхерт))` &ndash; скроется лишь пост "Ололо, у вас баттхерт!", содержащий оба этих слова.

Скрыть посты, `[НЕ] [содержащие слово "ня"]`:

* `!#words(ня)` &ndash; в данном случае пост "Ололо, все соснули!" будет скрыт, так как не содержит "ня". А вот пост "Все соснули, ня!" скрыт не будет.

Скрыть посты `( [содержащие слово "баттхерт"] [ИЛИ] [содержащие слово "соснули"] ) [И] [НЕ] [содержащие слово "ня"]`:

* `((#words(баттхерт) | #words(соснули)) & !#words(ня))` &ndash; скроются посты "Ололо, у вас баттхерт!", "Все соснули!", содержащие два первых слова, но не содержащие "ня". Однако пост "У всех баттхерт, ня!" скрыт не будет, так как содержит слово "ня".

***

### #all

`#all[доска,тред]()`

Всегда возвращает `true`. Аргумент игнорируется.
Это очень важный вспомогательный спелл, который полезен в случае, если нужно ограничить область действия.

Давайте рассмотрим подробнее:

* `!#words[b,32767](ня)` &ndash; данное выражение скрывает внутри треда `№32767` доски `/b/` посты, не содержащие слово "ня".

**Но!!** Вне треда `№32767` спелл `#words[b,32767](ня)` всегда возвращает `false`. А `!false`, как известно, это `true`. То есть вне данного треда все ваши посты и треды окажутся скрыты. 

Чтобы решить данную проблему, используйте `#all`:

* `(#all[b,32767] & !#words(ня))` &ndash; что означает найти и скрыть `[все посты треда b/32767] [И] [НЕ] [содержащие "ня"]`.

Данное выражение работает корректно и никогда не возвратит `true` вне данного треда, ибо здесь мы используем `#all[b,32767]`, чтобы ограничиться тредом `№32767` доски `/b/`.

Другие применения:

* `(#all[b] & !#words(ня))` &ndash; скрыть на доске /b/ посты, не содержащие "ня".
* `(!#all[a] & #words(аниму))` &mdash; скрыть на всех досках, кроме `/a/`, посты, содержащие "аниму".
* `(!#all[a,4095] & #words(тохо))` &mdash; скрыть везде, кроме треда `№4095` доски `/a/`, посты, содержащие "тохо".

<pre>
(#all[b,32767] & (
    #words(баттхерт) |
    #words(все соснули) |
    #words(ололо)
))
</pre>

&mdash; выражение, аналогичное 

<pre>
#words[b,32767](баттхерт) |
#words[b,32767](все соснули) |
#words[b,32767](ололо)
</pre>

но будет выполняться быстрее. Всегда используйте `#all[доска]` или `#all[доска,тред]` для группировки спеллов с одинаковой областью действия, это будет работать быстрее и позволит легче ориентироваться в ваших спеллах, если их у вас очень много.

***

### #op

`#op[доска,тред]()`

Возвращает `true`, если пост является оп-постом. Аргумент игнорируется. Позволяет скрывать только треды, не затрагивая обычные посты, либо наоборот. Примеры:

* `(#op & #words(еот))` &mdash; скроет треды, содержащие слово "еот" в оп-посте.
* `(!#op & #words(бамп))` &mdash; скроет обычные посты, содержащие слово "бамп". Оп-посты и, соответственно, сами треды скрываться не будут.
* `(#op[a] & !#words(ня))` &mdash; скроет треды на доске `/a/`, не содержащие в оп-посте слово "ня".
* `(!#op & #words[s](соснули))` &mdash; скроет обычные посты на доске `/s/`, содержащие слово "соснули", не затрагивая оп-посты и не скрывая треды.

**Важно!** `#op` является лишь индикатором оп-поста (т.е. треда) и не допускает каких-либо данных в аргументе.

* `#op(дурачьё)` &mdash; неверно! Это эквивалентно `#op()`, и скроет все ваши треды.
* `(#op & #words(дурачьё))` &mdash; правильная запись!

***

### Анти-вайп детектор #wipe

Скрипт имеет встроенные алгоритмы поиска текстовых сообщений, заведомо подходящих под определение вайпа и не характерных для обычного текста. Такие сообщения, как правило, содержат большой процент повторяющихся слов и строк, нехарактерный размер и символьное содержимое слов.

Спелл антивайп-детектора имеет формат:

`#wipe[доска,тред](список)`

Аргумент списка может содержать следующие парметры, перечисляемые через запятую:

* `samelines` &mdash; детектор текста с большим процентом повторяющихся строк,
* `samewords` &mdash; детектор текста с большим процентом повторяющихся слов,
* `longwords` &mdash; детектор длинных слов, нехарактерных для простого текста,
* `symbols` &mdash; детектор текста с большим процентом небуквенных символов,
* `capslock` &mdash; детектор текста с большим процентом капслока,
* `numbers` &mdash; детектор текста с большим процентом числовых символов,
* `whitespace` &mdash; детектор "пустых" постов с большим количеством пробелов.

Примеры использования:

* `#wipe(samelines,samewords,longwords,numbers)` &mdash; включает перечисленные детекторы на всех досках.
* `#wipe[b,32767](capslock,symbols)` &mdash; включает в треде `№32767` доски `/b/` перечисленные детекторы.
* `(!#op & #wipe[b](capslock))` &mdash; включает детектор capslock на доске `/b/`, не затрагивая оп-посты и не скрывая треды.
* `(#op[a] & #wipe(samelines))` &mdash; включает детектор samelines на доске `/a/`, скрывая только треды.

***

### #subj

`#subj[доска,тред](регекс)`

Возвращает `true`, если текстовая информация темы поста соответствует регексу (регулярному выражению), указанному в аргументе. Если аргумента нет, то возвращает `true` в случае наличия темы в посте.

Подробнее с регулярными выражениями вы можете ознакомиться, например, <a href="http://ru.wikipedia.org/wiki/Regexp" style="text-decoration:none; color:rgb(120, 63, 4)" target="_blank">здесь</a> и <a href="http://javascript.ru/RegExp" style="text-decoration:none; color:rgb(120, 63, 4)" target="_blank">здесь</a>. Примеры:

* `#subj(/sage/i)` &mdash; скрыть любой пост или тред, содержащий слово "sage" в теме.
* `#subj[b,32767]` &mdash; скрыть в треде `№32767` доски `/b/` посты с наличием темы.
* `(#all[b,32767] & !#subj)` &mdash; скрыть в треде `№32767` доски `/b/` посты без наличия темы.
* `(#op[b] & !#subj)` &mdash; скрыть на доске /b/ треды без наличия темы.
* `(#op[b] & #subj(/newfags|triforce/i))` &mdash; скрыть на доске `/b/` треды с наличием в теме слов "newfags" или "triforce", например, "Newfags vs oldfags", "You can't triforce".
* `#subj(/^[^a-zа-я\.]+$/)` &mdash; скрывать треды с КАПСЛОКОМ в теме.

***

### #name

`#name[доска,тред](строка)`

Возвращает `true`, если имя пользователя в посте содержит выражение, указанное в аргументе строки, с учетом регистра. Если аргумента нет, то возвращает `true` в случае наличия имени в посте. Примеры:

* `#name[a](Вася)` &mdash; скрыть на доске `/a/` любой пост или тред со словом "Вася" в имени.
* `#name[b,32767](Сажа)` &mdash; скрыть в треде `№32767` доски `/b/` посты, содержащие слово "Сажа" в имени, например, посты неймфага "Сажа-кун".

***

### #trip

`#trip[доска,тред](строка)`

Возвращает `true`, если трип-код пользователя в посте равен указанному аргументу строки. Если аргумента нет, то возвращает `true` в случае наличия трип-кода в посте. Примеры:

* `#trip` &mdash; скрыть любой пост или тред с трипкодом.
* `#trip(TRiF0RCE9)` &mdash; скрыть любой пост или тред с трипкодом "!TRiF0RCE9" или "!!TRiF0RCE9".
* `#trip[s,32767](!!Canc3RL0L4)` &mdash; скрыть в треде `№32767` доски `/s/` посты с трипкодом "!!Canc3RL0L4".
* `(#name(Oldfag) & #trip(!O.L.D.w79+!!2GE305Qc4))` &mdash; скрыть везде неймфага, который подписывается как "Oldfag!O.L.D.w79+!!2GE305Qc4"".
* `!#trip` &mdash; скрыть любой пост или тред, не содержащий трипкод.
* `(#all[a,4095] & !#trip)` &mdash; скрыть в треде `№4095` доски `/a/` посты без трипкода.
* `(#all[a,4095] & !#trip(!nyanCaT+73))` &mdash; скрыть в треде `№4095` доски `/a/` посты без трипкода "!nyanCaT+73".

***

### #sage

`#sage[доска,тред]()`

Возвращает `true`, если пост содержит сажу. Аргумент игнорируется. Примеры:

* `#sage` &mdash; скрыть во всех тредах и досках посты с сажей.
* `(#sage[b,32767] & #name(Sage-kun))` &mdash; скрыть в треде `№32767` доски `/b/` посты с сажей от Sage-kun'a.

Данный спелл автоматически добавляется, если кликнуть на иконку сажи в заголовке поста. 

***

### #tlen

`#tlen[доска,тред](аргумент)`

Возвращает `true`, если длина текста поста соответствует аргументу выражения. Может содержать точные значения, диапазоны и перечисления. Если аргумента нет, то возвращает `true` в случае наличия текста в посте. Примеры:

* `#tlen(22)` &mdash; скрыть посты с текстом длиной в 22 символа.
* `#tlen(500-10000)` &mdash; скрыть посты с текстом большим, чем 500 символов.
* `#tlen[ph](0-100,225,500-1000)` &mdash; скрыть на доске `/ph/` посты с текстом, который имеет размер, указанный в списке.
* `(!#op & #tlen)` &mdash; скрыть посты, содержащие текст. Оп-посты и треды игнорируются.
* `(#sage & !#tlen)` &mdash; скрыть посты с сажей, не содержащие текст.
* `#tlen[b,32767](0-20)` &mdash; скрыть в треде `№32767` доски `/b/` посты с текстом меньшим, чем 20 символов.
* `(#all[b,32767] & !#tlen(50-100))` &mdash; скрыть в треде `№32767` доски `/b/` посты с текстом меньшим, чем 50 символов, или большим, чем 100 символов.

Если в посте, который не содержит текст, выбрать меню `"Скрывать без текста"` по кнопке скрытия поста/треда, то в список спеллов добавится `!#tlen`.

***

### #num

`#num[доска,тред](аргумент)`

Возвращает `true`, если номер поста соответствует аргументу выражения. Аргумент обязателен и, как и в случае со спеллом `#tlen`, может содержать точные значения, диапазоны и перечисления. Используйте этот спелл, чтобы прямо скрывать посты по их порядковым номерам, либо исключить данные посты из области действия фильтров. Примеры:

* `#num[b,32767](100-200)` &mdash; скрыть в треде `№32767` доски `/b/` посты с порядковыми номерами между 100 и 200.
* `#num[m,65535](100-200,255,300-500)` &mdash; скрыть в треде `№65535` доски `/m/` посты с порядковыми номерами, указанными в списке.

Спелл имеет интересное свойство экранировать ваши посты от любых фильтров. Для этого добавьте в начало вашего списка конструкцию `!#num[доска,тред](аргумент) &`. Пример:

<pre>
!#num[b,32767](50-150) &
!#num[m,65535](100-200) &
#wipe(samelines,samewords,longwords,numbers)
</pre>

Данное выражение позволяет защитить от антивайп-детектора в треде `№32767` доски `/b/` и в треде `№65535` доски `/m/` посты, указанные в диапазоне.

***

### #img

`#img[доска,тред](аргумент)`

Возвращает `true`, если параметры изображения в посте соответствуют аргументу выражения.
Аргумент имеет следующий формат:

`[><=][вес_1[-вес_2]][@{ширина_1[-ширина_2]}x{высота_1[-высота_2]}]`

Если аргумента нет, то спелл возвращает `true` в случае наличия изображения в посте.

Спелл позволяет скрывать посты по <u>числовой</u> информации о прикрепленных картинках, посредством сравнения параметров их веса, ширины и высоты. Для указания веса картинки на любых имиджбордах в скрипте используется унифицированная запись в килобайтах, с умножением <i>числа Мб</i> на 1000 или делением <i>числа байт</i> на 1000 и округлением до двух цифр после запятой. К примеру, если в посте указано текстом 100KB, то нужно ввести 100. Аналогично: `100.85KB = 100.85`, `1.84MB = 1840`, `150955B = 150.96`, `760B = 0.76`.

Примеры использования с точными значениями, без указания диапазона:

* `#img[b,32767]` &mdash; скрыть в треде `№32767` доски `/b/` посты с картинками.
* `!#img` &mdash; скрыть на любых досках посты без картинок.
* `(#all[b,32767] & !#img)` &mdash; скрыть в треде `№32767` доски `/b/` посты без картинок.
* `#img(<35@640x480)` &mdash; скрыть посты с картинками меньше 35Кб и размером меньше 640x480.
* `#img(>@640x480)` &mdash; скрыть посты с картинками больше 640x480.
* `#img(<@300x100)` &mdash; скрыть посты с картинками меньше 300x100.
* `(#op & #img(=@900x700))` &mdash; скрыть треды с картинками в оп-посте размером 900x700.
* `(#op & #img[b](>1500))` &mdash; скрыть треды на доске /b/ с картинками в оп-посте весом больше 1.5 Мб.
* `#img[a,65535](=180.50)` &mdash; скрыть в треде `№65535` доски `/a/` посты с картинками весом в 180.5 Кб.
* `(!#img | #img(<1))` &mdash; скрыть посты с картинками весом меньше 1 Кб, а также посты без картинок.
* `(#sage & #img & !#tlen)` &mdash; скрыть на любых досках посты c картинками и сажей, но без текста.
* `(#img(=61@745x559) | #img(=7@215x250)) & (#all[vg] | #all[moba])` &mdash; скрывать два изображения с указанными параметрами на досках `/vg/` и `/moba/`.

Ниже приведены примеры с указанием диапазона значений в качестве параметра. Обратите внимание, что литералы `>` и `<` чувствительны только к первому значению диапазона:

* `#img(=30-60@640x480)` &mdash; скрыть посты с картинками весом от 30 до 60 Кб и размером 640x480.
* `#img(=29.80-30.20)` &mdash; скрыть посты с картинками весом от 29.8 до 30.2 Кб.
* `#img(=@300-500x500-700)` &mdash; скрыть посты с картинками размером от 300x500 до 500x700.
* `#img(=75@700-900x200)` &mdash; скрыть посты с картинками весом в 75 Кб и размером от 700x200 до 900x200.
* `#img(<200-300)` &mdash; эквивалентно `#img(<200)`.
* `#img(>@800-1000x600)` &mdash; эквивалентно `#img(>@800x600)`.

Если вам лень вводить параметры изображения и вычислять их вес, то вы можете выбрать меню `"Скрывать по размеру картинки"` кнопки скрытия поста/треда, и `#img` добавится в список спеллов автоматически. Вам останется только отредактировать условия. Если пост не содержит изображений, и вы выберете пункт меню `"Скрывать без картинок"`, то в список спеллов добавится `!#img`.

***

### #imgn

`#imgn[доска,тред](регекс)`

Возвращает `true`, если <u>текстовая</u> информация об изображении в посте соответствует регексу (регулярному выражению), указанному в аргументе. Аргумент обязателен. Например, для досок с информацией о картинках вида `(1040 KB, 900x700, Trollface.gif)`, применение спелла может выглядеть так:

* `#imgn(/\.gif/i)` &mdash; скрыть посты с .gif-файлами.
* `#imgn(/trollface/i)` &mdash; скрыть посты, содержащие имя файла "trollface", "TROLLface", и т.п.
* `#imgn[b,32767](/Trollface\.gif/)` &mdash; скрыть в треде `№32767` доски `/b/` посты, содержащие файл "Trollface.gif".
* `#imgn(/1040 KB/)` &mdash; аналог `#img(=1040)`, плюс &mdash; выполняется быстрее, минус &mdash; привязано к особенности текущего имиджборда. На другом имиджборде это может быть "1040Кб", либо "1.04 Mb".
* `#imgn(/900x700/)` &mdash; аналог `#img(=@900x700)`, выполняется быстрее. Учтите, на некоторых имиджбордах вместо "x" может быть другой символ.

***

### #ihash

`#ihash[доска,тред](хэш)`

Возвращает `true`, если изображение в посте соответствует хэшу, указанному в аргументе. Аргумент обязателен.

Спелл позволяет интеллектуально скрывать <i>схожие</i> изображения, сравнивая их [хеш-код](http://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5), получаемый методом фильтрации и вычисления контрольной суммы. Для этого наведите курсор на кнопку скрытия поста с изображением и выберите в меню `"Скрывать по схожей картинке"`. Сгенерированный хеш со спеллом `#ihash` автоматически добавится в список спеллов. Пример полученных выражений:

* `#ihash(603323568)` &mdash; все посты с изображениями, соответствующими данному хеш-коду, будут скрыты.
* `#ihash[b,32767](267050447) & !#tlen` &mdash; скрыть в треде `№32767` доски `/b/` посты без текста и с эквивалентной данному хэшу картинкой.

***

### #exp

`#exp[доска,тред](регекс)`

Возвращает `true`, если текст поста соответствует регексу (регулярному выражению), указанному в аргументе. Аргумент обязателен.

Спелл позволяет использовать регулярные выражения для поиска и скрытия по <u>текстовому содержимому</u> поста, без учета разметки. Примеры:

* `#exp(/^\s*[а-яa-z]/)` &mdash; скрыть посты, начинающиеся с маленькой буквы.
* `#exp(/^[^A-ZА-Я\.]+$/)` &mdash; скрыть посты без заглавных букв и точек.
* `#exp[b](/\u25b2\s\u25b2/)` &mdash; скрыть трифорсы на доске `/b/`.
* `#exp[b,32767](/(?:>>\d+\s*){8}/)` &mdash; скрыть вайп >>ссылками в треде `№32767` доски `/b/`.
* `#exp(/[fs]uck|fag|dick/i)` &mdash; "fuck", "Suck", "FAG", "dick", и т.п..
* `#exp(/[hd]urr/i)` &mdash; "hurr", "HURR", "durr", "DuRr", и т.п.
* `(#op & #exp(/конф(?:ер|[оау]ч?|ы)/i))` &mdash; "конфочка", "конференция", и т.п. в оп-постах.
* `#exp(/в ?контакт/i)` &mdash; "в контакте", "вконтакт", и т.п.
* `#exp(/[^a-zа-я](?:re|ре)?(?:roll|ролл)/i)` &mdash; "roll", "reroll", "ролл", "реролл", и т.п.
* `(#exp(/^[^A-ZА-Я>]+$/) & !#img & !#video)` &mdash; скрывает все посты, в которых нет заглавных букв, если не прикреплено видео или картинка.
* `#exp(/[ -]кун[-.,?!ауы ]|кунчик|[ -]тян[-.,?!ые ]|тян$|кун$|[ -]тн[яе]|[ -]тянк[еаиу]|[ -]тян[оy]чк[еаиу]|тянучек|[ -]тяночкой|кунам|кунов|тянам|тнн|кнн/i)` &mdash; "тяночку", "кунчика", "-тян", "-кун", "тянка", "тянучка", и т.п.
* `#exp(/2[kк]1\d/i)` &mdash; "2к16", "2к17", "2k16", "2K18", и т.п.
* `#exp(/вр[её]+ти+/i)` &mdash; "врёти", "врёёёёётии", "вретииииииииии", и т.п.
* `#exp(/лампово|ламповая|отношени[яй]|отношашки|отношашек| ебл[яюие]|[её]б[ыа]р|альфач|омеган/i)` &mdash; "ламповая", "отношашки", "ебля", "еблю", "ёбарь", "ебыря", "альфач", и т.п.
* `#exp(/кекнул|сереньк| ору[! ]|орнул|проорал| ч[её]т |за щ[её]ку|защеку|ман[яь]/i)` &mdash; "кекнул", "серенькнул", "проорал", "чёт", "ору", "за щёку", "маня", "мань".
* `#exp(/хуйл|укроп|рашк|пидора[хш]|ватник|\+15|с[тр]алин|совки|совках|совковы|совкобляд|русн[яюие]/i)` &mdash; "хуйло", "укроп", "пидорашка", "ватник", "+15", "сралин", "совковый", "русня".
* `(#op & #exp(/fap|фап|трапотред|милф|milf|рулетка|хуетред/i))` &mdash; фапотреды, рулеткотреды, милфотреды...

***

### #exph

`#exph[доска,тред](регекс)`

Возвращает `true`, если разметка поста соответствует регексу (регулярному выражению), указанному в аргументе. Аргумент обязателен.

Спелл дает возможность скрывать посты, применяя к их <u>html коду</u> регулярные выражения. Это позволяет делать анализ по разметке и структуре поста. Обратите внимание, что данный спелл выполняется медленнее, чем `#exp`, но охватывает все содержимое поста полностью, тогда как `#exp` проверяет только само текстовое сообщение. Примеры использования:

* `#exph(/(?:<strong>|<b>)[А-Я]{3}/)` &mdash; скрыть посты с жирным капслоком.
* `(#op & #exph(/\/sticky\.png/i))` &mdash; автоскрытие закреплённых тредов.
* `#exph(/(?:<br>\s*){4}/i)` &mdash; скрыть вайп пустыми строками (переносами строки).
* `#exph(/mailto:sage/i)` &mdash; аналог спелла #sage.
* `#exph(/<span[^>]+postertrip/i)` &mdash; аналог спелла #trip.
* `(#op & #exph[b](/(?:new|old)fags can.*t/i))` &mdash; скрывать на доске `/b/` "Newfags can't triforce" треды.
* `#exph[int](/src="\/images\/balls\/fi.png"/)` &mdash; скрыть на krautchan.net/int/ посты из Финляндии.
* `#exph[po](/src="\/icons\/logos\/sion.png"/)` &mdash; скрыть на 2ch.hk посты со значком "Сионизм".
* `(!#op & #exph(/# OP/))` &mdash; скрыть на 2ch.hk посты опа, не скрывая оп-пост.
* `#exph(/title=".*?"> *Стикер/ig)` &mdash; скрывать посты со стикерами на `2ch.hk`.
* `#exph(/<img src="/flags/ua.png"/ig)` &mdash; скрывать посты из Украины на `2ch.hk`.

***

### #video

`#video[доска,тред](регекс)`

Возвращает `true`, если заголовок видео в посте соответствует регексу (регулярному выражению), указанному в аргументе. Если аргумента нет, то возвращает `true` в случае наличия видео в посте. Если есть агрумент и отключена опция `Ссылки` > `Загружать названия к YouTube ссылкам*`, то всегда возвращает `false`.

Спелл позволяет скрывать посты, применяя регулярные выражения к названиям загруженных youtube-роликов:

* `#video[b](/rickroll/i)` &mdash; скрыть на доске `/b/` посты с youtube-рикроллом.
* `#video(/vocaloid|miku|iosys|nya|neko|japan|touhou|anime/i)` &mdash; скрыть по всем перечисленным совпадениям в названии.
* `#video(/цой|летов|гражданск|rick|skrillex|bieber/i)`

**Важно!** Для работы данного спелла включите опцию `Ссылки` > `Загружать названия к YouTube ссылкам*`.

***

### #vauthor

`#vauthor[доска,тред](строка)`

Возвращает `true`, если автор видео в посте соответствует строке, указанной в аргументе. Если отключена опция `Ссылки` > `Загружать названия к YouTube ссылкам*`, то всегда возвращает `false`.

Спелл позволяет скрывать посты по совпадению с автором загруженных youtube-видеороликов:

* `#vauthor(Sthephan Shi)`
* `#vauthor[mu](RickAstleyVEVO)`

**Важно!** Для работы данного спелла включите опцию `Ссылки` > `Загружать названия к YouTube ссылкам*`.

***

## Спеллы замены

### #rep

`#rep[доска,тред](регекс,строка)`

Спелл позволяет заменять html код тредов посредством регексов (регулярных выражений) на заданную по усмотрению пользователя строку. После внесения команды в список, изменения произойдут только при обновлении страницы. В регулярном выражении обязателен флаг `/g`, чтобы изменения происходили по всем найденным совпадениям. Примеры использования:

* `#rep(/Вася/g,Петя)` &mdash; примитивная замена слова.
* `#rep(/Вася/ig,Петя)` &mdash; совпадёт с `вася`, `ВАСЯ`, `Вася` и т.д., и заменит на `Петя`. Флаг `i` &mdash; нечувствительность к регистру.
* `#rep(/\(123\)/g,(321\))` &mdash; заменяет `(123)` на `(321)`; обратите внимание на то, что символ `)` в строке экранирован.
* `#rep(/http:\/\/2ip.ru[^<> ]*/ig,)` &mdash; удаляет ссылки на `2ip.ru`.
* `#rep(/-red-(.*?)-red-/ig,<font color="red"></font>)` &mdash; можно писать -red-красным-red-.
* `#rep(/chrome|хром/ig,псевдобраузер)`
* `#rep[s](/([^a-zа-я])(?:(?:GNU|ЖМУ|ГНУ).?)?(?:linu(?:x|ks)|лин\[еуа](?:[кп]с|х)(?:а|е|о[мв]|у)?|debian|gentoo|arch|fedora|slackware|(?:open)?suse|red ?hat|RHEL|[a-z]?ubuntu|(?:[а-я]?убунт|(?:г|дж)ент|федор|слак)(?:а|у|ой|е)|(?:дебиан|арч)(?:[ое]м|ч?ик|е|а|у)?|сус(?:я|ю|ей))/ig,$1ПитухОС)` &mdash; автозамена для /s/, заменяет все линуксы на ПитухОС.
* `#rep(/<[^>]+postername">Сырно<\/span>/ig,)` &mdash; скрыть имя по умолчанию на `iichan.hk`.
* `#rep(/<span class="commentpostername">Сырно<\/span>/g,<span class="commentpostername">Аноним</span>)` &mdash; заменить на `iichan.hk` имя по умолчанию на Аноним. Работает только на ответах (ОП остаётся Сырно), но работает быстрее предыдущего примера.
* `#rep(/(№(?:<\/a><a[^>]+>)?\d*)(\d)(\2+)</g,$1<font color="red">$2$3</font><)` &mdash; подсветка красным даблов, триплов и т.д. на `2ch.hk`.
* `#rep(/в?(к|контакте|тентакле|параше|кудахте|паше|дурове?)\.(ком|com)/ig,vk.com)` &mdash; исправление сленгоназваний `вконтакте` на `vk.com`

Данный спелл должен быть обособлен от остальных спеллов, кроме `#outrep`.

***

### #outrep

`#outrep[доска,тред](регекс,строка)`

Спелл позволяет заменять текст сообщения посредством регексов (регулярных выражений) перед отправкой поста на сервер, и будет полезен, например, при обходе автозамены. Примеры использования:

* `#outrep(/\.{3}/g,…)` &mdash; замена трех точек на символ многоточия.
* `#outrep(/ - /g, — )` &mdash; заменять дефис с пробелами на тире.
* `#outrep(/быдло/ig,б*ы*дло)`
* `#outrep(/школьник/ig,школь[b][/b]ник)`
* `#outrep(/(>>\d+)\s*(?!\n)/g,$1\n)` &mdash; спелл, ставящий за вас заглавные буквы и автоматически начинающий новый абзац после номера поста.

Данный спелл должен быть обособлен от остальных спеллов, кроме `#rep`.
